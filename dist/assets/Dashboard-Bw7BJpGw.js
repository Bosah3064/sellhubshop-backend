import{r as w,u as re,j as e,B as u,a7 as ne,b as x,x as b,y as j,T as se,a8 as I,d as P,e as h,g as oe,S as W,L as k,D as de,s as l,a6 as ae,M as ce}from"./index-DIxCcwTo.js";import{A as me,a as xe,b as he}from"./avatar-C_jNKov4.js";import{S as D}from"./skeleton-Dlpxet0e.js";import{C as ie}from"./PriceDisplay-_QDTrlZ3.js";import{R as ue,C as pe,X as ge,Y as fe,T as be}from"./generateCategoricalChart-pUYUcWZP.js";import{A as je,a as we}from"./AreaChart-BnsgDcCU.js";import{E as F}from"./eye-DkAcDlvf.js";import{U as Ne}from"./users-DBPXf3v8.js";import{C as ve}from"./circle-check-BFErec5s.js";import{L as te}from"./link-Col-x9L5.js";import{P as G}from"./package-GtKN0b3_.js";import{D as ye}from"./dollar-sign-CKhvHsyU.js";import{P as K}from"./plus-CBbazF2H.js";import{s as O}from"./subDays-Di7uyB7o.js";import{f as H}from"./format-CcXPetpd.js";import{I as _e}from"./image-DUKzMe2-.js";import{S as ke}from"./square-pen-D7UXfZ4O.js";import{T as Pe}from"./trash-2-2bzzvvn1.js";const Se=()=>{const[a,t]=w.useState([]),[S,v]=w.useState({totalProducts:0,totalViews:0,activeProducts:0,totalRevenue:0,totalMessages:0,pendingProducts:0,todayViews:0,monthlyRevenue:0}),[y,c]=w.useState(null),[V,N]=w.useState(!0),[A,M]=w.useState(null),[g,E]=w.useState([]),[$,_]=w.useState([]),{toast:R}=re(),z=w.useCallback(async()=>{try{N(!0);const{data:{user:o},error:T}=await l.auth.getUser();if(!o){R({variant:"destructive",title:"Authentication Required",description:"Please sign in to access dashboard"});return}if(T)throw T;console.log("ðŸ”„ Loading dashboard for user:",o.id);const[L,s,i,n]=await Promise.all([l.from("products").select("id, name, description, price, status, views, created_at, images, category, location, featured, verified, user_id").eq("user_id",o.id).order("created_at",{ascending:!1}),l.from("user_plans").select("id, status, user_id, plan_id, plans!plan_id(id, name)").eq("user_id",o.id).eq("status","active").maybeSingle(),l.from("messages").select("id",{count:"exact",head:!0}).eq("receiver_id",o.id).eq("is_read",!1),l.from("profiles").select("username, plan_type").eq("id",o.id).single()]),f=L.data||[];if(t(f),n.data&&M(n.data.username),s.data)c(s.data);else{const r=n.data;r?.plan_type&&r.plan_type!=="free"?c({plan_id:"",status:"active",user_id:o.id,id:"fallback",plans:{id:"",name:r.plan_type.charAt(0).toUpperCase()+r.plan_type.slice(1),product_limit:r.plan_type==="gold"?1/0:50}}):c(null)}const q=i.count||0;let X=0,Z=0,J=0;f.forEach(r=>{const p=Number(r.views)||0;X+=p,r.status==="active"||r.status==="approved"?Z++:r.status==="pending"&&J++});const le={totalProducts:f.length,totalViews:X,activeProducts:Z,totalRevenue:0,monthlyRevenue:0,totalMessages:q,pendingProducts:J,todayViews:0};v(le),setTimeout(async()=>{try{let r=0,p=0;const{data:C,error:U}=await l.from("orders").select("price, status, created_at, seller_id, user_id").or(`seller_id.eq.${o.id},user_id.eq.${o.id}`).eq("status","completed");if(!U&&C){const d=new Date().getMonth(),m=new Date().getFullYear();C.forEach(B=>{const Q=Number(B.price)||0;if(r+=Q,B.created_at){const ee=new Date(B.created_at);ee.getMonth()===d&&ee.getFullYear()===m&&(p+=Q)}})}v(d=>({...d,totalRevenue:r,monthlyRevenue:p}))}catch(r){console.log("âŒ Error loading revenue data:",r)}},100);const Y=f.map(r=>r.id);if(Y.length>0){const{data:r}=await l.from("product_views").select("created_at").in("product_id",Y).gte("created_at",O(new Date,7).toISOString()),p=new Map;for(let d=6;d>=0;d--){const m=H(O(new Date,d),"MMM dd");p.set(m,0)}r&&r.forEach(d=>{const m=H(new Date(d.created_at),"MMM dd");p.has(m)&&p.set(m,(p.get(m)||0)+1)});const C=Array.from(p.entries()).map(([d,m])=>({date:d,views:m}));E(C);const{data:U}=await l.from("product_views").select("user_id, created_at").in("product_id",Y).not("user_id","is",null).order("created_at",{ascending:!1}).limit(20);if(U&&U.length>0){const d=[...new Set(U.map(m=>m.user_id))].slice(0,5);if(d.length>0){const{data:m}=await l.from("profiles").select("id, full_name, avatar_url, username").in("id",d);_(m||[])}}}else{const r=Array.from({length:7}).map((p,C)=>({date:H(O(new Date,6-C),"MMM dd"),views:0}));E(r)}}catch(o){console.error("âŒ Error loading dashboard data:",o),R({variant:"destructive",title:"Error loading dashboard",description:o.message||"Failed to load dashboard data"})}finally{N(!1)}},[R]);return{products:a,stats:S,stats:S,performanceData:g,recentViewers:$,plan:y,username:A,setUsername:M,isLoading:V,loadDashboardData:z}};function Oe(){const{products:a,stats:t,performanceData:S,recentViewers:v,plan:y,username:c,isLoading:V,loadDashboardData:N}=Se(),[A,M]=w.useState(!1),{toast:g}=re();w.useEffect(()=>{document.title="Dashboard - Manage Your Products | SellHub",N();const i=(async()=>{const{data:{user:n}}=await l.auth.getUser();if(!n)return;const f=l.channel("dashboard-updates").on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`id=eq.${n.id}`},()=>{console.log("âœ¨ Profile updated! Refreshing dashboard..."),N()}).subscribe();return()=>{l.removeChannel(f)}})();return()=>{i.then(n=>n&&n())}},[N]);const E=async()=>{M(!0),await N(),M(!1),g({title:"Dashboard Updated",description:"All statistics have been refreshed"})},$=async s=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone."))try{const{error:i}=await l.from("products").update({status:"deleted"}).eq("id",s);if(i)throw i;a.find(f=>f.id===s)&&N(),g({title:"Product deleted",description:"Product has been successfully deleted."})}catch(i){console.error("Error deleting product:",i),g({variant:"destructive",title:"Error deleting product",description:i.message||"Failed to delete product"})}},_=()=>{if(!y)return 5;switch(y.plans?.name?.toLowerCase()||"free"){case"silver":case"professional":return 50;case"gold":case"enterprise":return 1/0;default:return 5}},R=()=>{const s=y?.plans?.name?.toLowerCase()||"free";return s==="gold"||s==="enterprise"?["Unlimited product listings","Featured homepage placement","Unlimited product images","Advanced analytics & insights","Dedicated account manager","24/7 priority support"]:s==="silver"||s==="professional"?["Up to 50 products","Priority search placement","10 product images per listing","Advanced sales analytics","Promotional badges","Priority email support"]:["Up to 5 products","Basic seller profile","3 product images per listing","Email support","Community forum access"]},z=s=>new Date(s).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),o=s=>{switch(s){case"active":case"approved":return"bg-green-500";case"sold":return"bg-blue-500";case"pending":return"bg-yellow-500";case"deleted":return"bg-gray-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}},T=s=>{switch(s){case"approved":return"active";default:return s}},L=t.totalProducts<_();return V?e.jsx("main",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(D,{className:"h-12 w-1/3 rounded-xl"}),e.jsx(D,{className:"h-6 w-1/2 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(D,{className:"h-[400px] lg:col-span-2 rounded-2xl"}),e.jsx(D,{className:"h-[400px] rounded-2xl"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,i)=>e.jsx(D,{className:"h-32 rounded-xl"},i))}),e.jsx(D,{className:"h-[500px] w-full rounded-2xl"})]})}):e.jsxs("main",{className:"container mx-auto py-8",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Seller Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your marketplace presence and track performance"})]}),e.jsxs(u,{onClick:E,variant:"outline",size:"sm",disabled:A,children:[e.jsx(ne,{className:`h-4 w-4 mr-2 ${A?"animate-spin":""}`}),A?"Refreshing...":"Refresh Data"]})]})}),e.jsx("section",{className:"mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(x,{className:"lg:col-span-2 overflow-hidden border-2 border-gray-100 shadow-xl rounded-2xl",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-8",children:[e.jsxs("div",{children:[e.jsxs(j,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-green-600"}),"Product Views Trend"]}),e.jsx(I,{children:"Visual tracker for your listing reach"})]}),e.jsx(P,{variant:"secondary",className:"bg-green-100 text-green-700",children:"7-Day Trend"})]}),e.jsx(h,{className:"h-[300px] pr-8",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(je,{data:S,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]})}),e.jsx(pe,{strokeDasharray:"3 3",vertical:!1,stroke:"#F3F4F6"}),e.jsx(ge,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:11},dy:10}),e.jsx(fe,{axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:11}}),e.jsx(be,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)"}}),e.jsx(we,{type:"monotone",dataKey:"views",stroke:"#16a34a",strokeWidth:4,fillOpacity:1,fill:"url(#colorViews)"})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{className:"border-2 border-indigo-50 shadow-xl bg-white rounded-2xl overflow-hidden",children:[e.jsx(b,{className:"bg-indigo-50/50 pb-4",children:e.jsxs(j,{className:"text-lg font-bold flex items-center gap-2 text-indigo-900",children:[e.jsx(F,{className:"h-5 w-5 text-indigo-600"}),"Who Viewed Your Products"]})}),e.jsx(h,{className:"pt-6",children:v.length>0?e.jsxs("div",{className:"space-y-4",children:[v.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-xl transition-colors",children:[e.jsxs(me,{className:"h-10 w-10 border-2 border-white shadow-sm",children:[e.jsx(xe,{src:s.avatar_url}),e.jsx(he,{className:"bg-indigo-100 text-indigo-700",children:s.full_name?.charAt(0)||s.username?.charAt(0)||"U"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:s.full_name||s.username||"Anonymous User"}),e.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:"Viewed your listings"})]})]},s.id)),v.length>=5&&e.jsx("div",{className:"text-center pt-2",children:e.jsx(u,{variant:"link",className:"text-xs text-indigo-600",children:"View All Activity"})})]}):e.jsxs("div",{className:"text-center py-6 text-gray-400",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Ne,{className:"h-6 w-6 text-indigo-300"})}),e.jsx("p",{className:"text-sm font-medium",children:"No identified viewers yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Share your shop link to get more traffic!"})]})})]}),e.jsxs(x,{className:"border-2 border-amber-50 shadow-xl bg-gradient-to-br from-white to-amber-50/30 rounded-2xl",children:[e.jsx(b,{children:e.jsxs(j,{className:"text-lg font-bold flex items-center gap-2 text-amber-900",children:[e.jsx(oe,{className:"h-5 w-5 text-amber-500"}),"Smart Insights"]})}),e.jsxs(h,{className:"space-y-4",children:[t.totalViews>100&&t.totalRevenue===0?e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-amber-100 group hover:border-amber-200 transition-all",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-1",children:"High Interest, Low Sales"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 leading-relaxed",children:"You have high views but no sales yet. Consider lowering prices or adding better images."})]}):e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-green-100 group hover:border-green-200 transition-all",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 mb-1",children:"Growth Tip"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 leading-relaxed",children:"Complete your profile and add a verified badge to build trust with buyers."})]}),e.jsxs("div",{className:"bg-gray-900 p-4 rounded-xl shadow-lg border-0 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -mr-10 -mt-10 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"h-4 w-4 fill-amber-400 text-amber-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Pro Analytics"})]}),e.jsx("p",{className:"text-[10px] text-gray-300 leading-tight mb-3",children:"Unlock demographics, heatmaps, and competitor analysis with Gold plan."}),e.jsx(u,{size:"sm",variant:"secondary",className:"w-full text-xs h-7 bg-white/10 hover:bg-white/20 text-white border-none",children:"Upgrade"})]})]})]})]})]})]})}),e.jsxs(x,{className:"mb-6 bg-gradient-to-r from-primary/10 to-secondary/10 border-primary/20",children:[e.jsxs(b,{className:"pb-3",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-primary"}),"Current Plan: ",y?.plans?.name||"Free"]}),e.jsxs(I,{className:"text-base",children:["Products:"," ",e.jsxs("span",{className:"font-semibold",children:[t.totalProducts," / ",_()===1/0?"Unlimited":_()]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:R().map((s,i)=>e.jsxs(P,{variant:"secondary",className:"text-[10px] py-0",children:[e.jsx(ve,{className:"h-2 w-2 mr-1 text-green-500"}),s]},i))})]}),e.jsx(h,{children:!L&&_()!==1/0?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{variant:"destructive",className:"text-sm",children:"Limit Reached"}),e.jsx(k,{to:"/pricing",children:e.jsx(u,{className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:"Upgrade Plan"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(t.totalProducts/_()*100,100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[_()-t.totalProducts," products remaining"]})]})})]}),e.jsxs(x,{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[e.jsxs(b,{className:"pb-3",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-blue-600"}),"Your Shop Link"]}),e.jsx(I,{children:"Share this link to let customers view all your products in one place"})]}),e.jsx(h,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[c?e.jsxs("div",{className:"flex-1 w-full flex items-center gap-2 p-3 bg-white rounded-lg border border-blue-100 shadow-sm",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"sellhubshop.co.ke/u/"}),e.jsx("span",{className:"font-bold text-blue-700",children:c})]}):e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("p",{className:"text-sm text-yellow-600 mb-2 font-medium",children:[e.jsx(de,{className:"inline h-4 w-4 mr-1"}),"Set a username to create your unique shop link"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter username (e.g. janeshop)",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",id:"username-input"}),e.jsx(u,{onClick:async()=>{const i=document.getElementById("username-input").value.trim();if(i){if(!/^[a-zA-Z0-9_-]+$/.test(i)){g({variant:"destructive",title:"Invalid format",description:"Username can only contain letters, numbers, underscores and dashes"});return}try{const{data:{user:n}}=await l.auth.getUser();if(!n)return;const{data:f}=await l.from("profiles").select("id").eq("username",i).single();if(f){g({variant:"destructive",title:"Taken",description:"This username is already taken"});return}const{error:q}=await l.from("profiles").update({username:i}).eq("id",n.id);if(q)throw q;g({title:"Success",description:"Username set successfully!"}),N()}catch(n){g({variant:"destructive",title:"Error",description:n.message})}}},children:"Claim Link"})]})]}),c&&e.jsxs(u,{variant:"outline",className:"w-full md:w-auto",onClick:()=>{const s=`${window.location.origin}/u/${c}`;navigator.clipboard.writeText(s),g({title:"Copied!",description:"Shop link copied to clipboard"})},children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),c&&e.jsx("a",{href:`/u/${c}`,target:"_blank",rel:"noreferrer",className:"w-full md:w-auto",children:e.jsx(u,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Visit Shop"})})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsxs(x,{className:"bg-white/70 backdrop-blur-md border border-white/20 hover:shadow-[0_20px_50px_rgba(0,0,0,0.1)] transition-all duration-500 border-l-4 border-l-blue-500 rounded-2xl shadow-lg",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalProducts}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{className:"text-green-500",children:[t.activeProducts," active"]}),t.pendingProducts>0&&e.jsxs("span",{className:"text-yellow-500 ml-2",children:[t.pendingProducts," pending"]})]})]})]}),e.jsxs(x,{className:"bg-white/70 backdrop-blur-md border border-white/20 hover:shadow-[0_20px_50px_rgba(0,0,0,0.1)] transition-all duration-500 border-l-4 border-l-green-500 rounded-2xl shadow-lg",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Total Views"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalViews.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.totalViews===0?e.jsx("span",{className:"text-orange-500",children:"No views yet"}):"Across all products"})]})]}),e.jsxs(x,{className:"bg-white/70 backdrop-blur-md border border-white/20 hover:shadow-[0_20px_50px_rgba(0,0,0,0.1)] transition-all duration-500 border-l-4 border-l-purple-500 rounded-2xl shadow-lg",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Revenue"}),e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx(ie,{kesAmount:t.totalRevenue}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.monthlyRevenue>0?e.jsxs("span",{className:"text-green-500",children:["KES ",t.monthlyRevenue.toLocaleString()," this month"]}):"No revenue yet"})]})]}),e.jsxs(x,{className:"bg-white/70 backdrop-blur-md border border-white/20 hover:shadow-[0_20px_50px_rgba(0,0,0,0.1)] transition-all duration-500 border-l-4 border-l-orange-500 rounded-2xl shadow-lg",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Messages"}),e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalMessages}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.totalMessages===0?"No new messages":"Unread messages"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx(k,{to:"/products/upload",children:e.jsx(x,{className:"hover:shadow-lg transition-all duration-200 hover:scale-105 cursor-pointer border-2 border-dashed border-primary/20 hover:border-primary/40",children:e.jsxs(h,{className:"p-6 text-center",children:[e.jsx(K,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Add New Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:L?"List a new item for sale":"Upgrade to add more products"})]})})}),e.jsx(k,{to:"/messages",children:e.jsx(x,{className:"hover:shadow-lg transition-all duration-200 hover:scale-105 cursor-pointer",children:e.jsxs(h,{className:"p-6 text-center",children:[e.jsx(ae,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"View Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.totalMessages===0?"No new messages":`${t.totalMessages} unread messages`})]})})}),e.jsx(k,{to:"/analytics",children:e.jsx(x,{className:"hover:shadow-lg transition-all duration-200 hover:scale-105 cursor-pointer",children:e.jsxs(h,{className:"p-6 text-center",children:[e.jsx(se,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"View Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your sales and performance"})]})})})]}),e.jsxs(x,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Your Products (",a.length,")"]}),e.jsx(I,{children:"Manage your product listings and track performance"})]}),e.jsx(k,{to:"/products/upload",children:e.jsxs(u,{disabled:!L,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Add Product"]})})]}),e.jsx(h,{children:a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-lg",children:"You haven't added any products yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Start selling by adding your first product to the marketplace"}),e.jsx(k,{to:"/products/upload",children:e.jsxs(u,{size:"lg",className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsx(Ce,{product:s,onDelete:$,formatDate:z,getStatusColor:o,getStatusText:T},s.id))})})]})]})}const Ce=({product:a,onDelete:t,formatDate:S,getStatusColor:v,getStatusText:y})=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-accent/50 transition-all duration-200 group",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-muted flex items-center justify-center",children:[a.images&&a.images.length>0?e.jsx("img",{src:a.images[0],alt:a.name,className:"w-full h-full object-cover",loading:"lazy",onError:c=>{c.currentTarget.style.display="none",c.currentTarget.parentElement?.querySelector(".image-fallback")?.classList.remove("hidden")}}):null,e.jsx("div",{className:`image-fallback w-full h-full flex items-center justify-center ${a.images&&a.images.length>0?"hidden":""}`,children:e.jsx(_e,{className:"h-6 w-6 text-muted-foreground"})})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:a.name}),e.jsxs("div",{className:"flex gap-1",children:[a.featured&&e.jsxs(P,{variant:"secondary",className:"text-xs bg-yellow-500 hover:bg-yellow-600 text-white",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Featured"]}),a.verified&&e.jsx(P,{variant:"default",className:"text-xs bg-green-500 hover:bg-green-600 text-white",children:"Verified"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.jsx(ie,{kesAmount:a.price||0,className:"inline-flex"}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),Number(a.views)||0," views"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Created ",S(a.created_at)]})]}),a.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:a.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[a.category&&e.jsx(P,{variant:"outline",className:"text-xs",children:a.category}),a.location&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"}),a.location]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"secondary",className:`capitalize ${v(a.status)} text-white border-0`,children:y(a.status)}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(u,{size:"icon",variant:"ghost",asChild:!0,className:"h-8 w-8",children:e.jsx(k,{to:`/product/${a.id}`,children:e.jsx(F,{className:"h-3 w-3"})})}),e.jsx(u,{size:"icon",variant:"ghost",asChild:!0,className:"h-8 w-8",children:e.jsx(k,{to:`/edit/${a.id}`,children:e.jsx(ke,{className:"h-3 w-3"})})}),e.jsx(u,{size:"icon",variant:"ghost",onClick:()=>t(a.id),disabled:a.status==="sold",className:"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(Pe,{className:"h-3 w-3"})})]})]})]});export{Oe as default};
