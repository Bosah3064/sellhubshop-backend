import{u as p,v as f,r,j as e,b as j,x as v,F as g,y,e as N,aX as a,B as n,s as l}from"./index-DIxCcwTo.js";import{R as b}from"./rotate-ccw-CB571PKh.js";function C(){const{toast:t}=p(),c=f(),[o,d]=r.useState(!1),[i,x]=r.useState("");r.useEffect(()=>{(async()=>{const{data:{user:m}}=await l.auth.getUser();m?.email&&x(m.email)})()},[]);const u=async()=>{if(!i){t({variant:"destructive",title:"Error",description:"No email address found. Please sign in again."});return}d(!0);try{const{error:s}=await l.auth.resend({type:"signup",email:i,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(s)throw s;t({title:"Verification email sent!",description:"Check your inbox for the verification link."})}catch(s){console.error("Resend verification error:",s),t({variant:"destructive",title:"Failed to send",description:"Please try again later."})}finally{d(!1)}},h=async()=>{try{const{data:{user:s}}=await l.auth.getUser();s?.email_confirmed_at?(t({title:"Email verified!",description:"Your email has been successfully verified."}),c("/dashboard")):t({variant:"destructive",title:"Not verified yet",description:"Please check your email and click the verification link."})}catch(s){console.error("Error checking verification:",s)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-4",children:e.jsxs(j,{className:"w-full max-w-md shadow-xl border-0",children:[e.jsxs(v,{className:"space-y-1 text-center pb-2",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(g,{className:"h-12 w-12 text-purple-600"})}),e.jsx(y,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Verify Your Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:"We've sent a verification link to your email address"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-purple-800",children:["Please check your inbox at ",e.jsx("strong",{children:i})," and click the verification link to activate your account."]})}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(a,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{children:"Check your email inbox"})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(a,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{children:"Click the verification link"})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(a,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{children:"Return to complete setup"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{onClick:u,disabled:o,className:"w-full h-11 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold",children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Resend Verification Email"]})}),e.jsxs(n,{onClick:h,variant:"outline",className:"w-full h-11 border-purple-200 text-purple-700 hover:bg-purple-50",children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),"I've Verified My Email"]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Having trouble?"," ",e.jsx(n,{variant:"link",className:"p-0 h-auto text-purple-600 font-semibold",onClick:()=>c("/signin"),children:"Return to Sign In"})]})})]})]})})}export{C as default};
