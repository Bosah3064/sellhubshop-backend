import{c as Ge,v as He,r as p,s as j,w as u,j as e,q as K,b as D,x as B,y as O,d as z,z as T,e as _,o as d,Z as Ye,B as U,g as he,I as x,M as xe,A as fe,X as Je,D as Ze,E as Xe,S as Qe,f as be,P as je,F as Ke}from"./index-DIxCcwTo.js";import{T as es}from"./textarea-QQPFZBv8.js";import{C as R,S,a as P,b as L,c as F,d as v}from"./select-D5YEeGQh.js";import{S as ye}from"./switch-Cu0j0zPN.js";import{k as ee}from"./kenyan-locations-B_zgBGGF.js";import{C as Ne}from"./camera-DUJXmKo-.js";import{T as ss}from"./trash-2-2bzzvvn1.js";import{M as ts}from"./message-circle-C61Fvmn6.js";import"./index-BdQq_4o_.js";import"./index-DskgONLa.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function xs(){const M=He(),[W,se]=p.useState(!1),[ve,te]=p.useState(!0),[h,V]=p.useState([]),[we,G]=p.useState([]),[H,I]=p.useState({}),[ae,Ce]=p.useState([]),[w,Se]=p.useState(null),[k,Y]=p.useState([]),[y,re]=p.useState({basic:!0,category:!0,properties:!1,contact:!1}),[J,Pe]=p.useState(""),[ie,oe]=p.useState(""),[Le,Z]=p.useState(!1),[Fe,X]=p.useState(""),[r,c]=p.useState({name:"",price:"",originalPrice:"",category:"",subcategory:"",description:"",brand:"",condition:"New",county:"",location:"",phone:"",whatsapp:"",email:"",negotiable:!0,featured:!1,properties:{}});p.useEffect(()=>{document.title="Upload Product â€“ Add your listing",$e(),qe()},[]);const $=(()=>{let s=0;const{name:t,description:a,price:i,category:o,subcategory:l,county:n,location:m,properties:g}=r;return t.length>=10&&(s+=10),t.length>=25&&(s+=5),t.length>=40&&(s+=5),a.length>=50&&(s+=10),a.length>=200&&(s+=10),a.length>=500&&(s+=10),h.length>=1&&(s+=10),h.length>=3&&(s+=10),h.length>=6&&(s+=10),i&&parseFloat(i)>0&&(s+=5),o&&l&&(s+=5),n&&m&&(s+=5),Object.keys(g).length>=2&&(s+=5),Math.min(s,100)})(),ne=s=>s<40?"bg-red-500":s<70?"bg-amber-500":"bg-green-600",Ie=s=>s<40?"Weak Listing":s<70?"Good Listing":"Excellent Listing!",ke=()=>{const s=q()?.name||"";if(!r.name){u({title:"Add a title first",description:"We need a product title to enhance your description.",variant:"destructive"});return}let t="";const a=r.name,i=r.condition;s.toLowerCase().includes("phone")||s.toLowerCase().includes("electronics")?t=`Check out this amazing ${a}! In ${i} condition, this device offers top-tier performance and reliability. 

Key features:
- High-resolution display
- Long-lasting battery life
- Premium build quality

It's been well-maintained and works perfectly. Great value for anyone looking for a quality ${s}. Contact me for more details!`:s.toLowerCase().includes("car")||s.toLowerCase().includes("vehicles")?t=`Up for sale is a stunning ${a}. This ${i} vehicle is a perfect blend of style, comfort, and efficiency. 

Highlights:
- Smooth handling and great performance
- Clean interior and exterior
- Low maintenance and reliable

A fantastic choice for daily commuting or weekend drives. Priced to sell fast!`:t=`Experience the best of ${a}. This ${i} item is perfect for anyone looking for quality and value. Features include modern design, durability, and excellent ${s} performance. 

Ready for immediate use. Don't miss out on this amazing deal!`,c(o=>({...o,description:t})),u({title:"âœ¨ AI Description Generated!",description:`Optimized for ${s||"general"} sales.`})},$e=async()=>{try{const{data:{user:s},error:t}=await j.auth.getUser();if(t)throw t;Se(s)}catch(s){console.error("Error loading user:",s),u({variant:"destructive",title:"Authentication required",description:"Please log in to upload products"}),M("/login")}},qe=async()=>{try{te(!0);const{data:s,error:t}=await j.from("categories").select("*").order("name");if(t)throw t;console.log("Loaded categories:",s);const a=s?.filter(o=>!o.parent_id)||[],i=await Promise.all(a.map(async o=>{const{data:l}=await j.from("categories").select("*").eq("parent_id",o.id).order("name");return{...o,subcategories:l||[]}}));Ce(i)}catch(s){console.error("Error loading categories:",s),u({variant:"destructive",title:"Error loading categories",description:"Please try again later"})}finally{te(!1)}},le=ee.counties.filter(s=>s.name.toLowerCase().includes(J.toLowerCase())||s.locations.some(t=>t.toLowerCase().includes(J.toLowerCase()))),ce=(s=>ee.counties.find(a=>a.id===s)?.locations||[])(r.county).filter(s=>s.toLowerCase().includes(ie.toLowerCase())),Ee=()=>ee.counties.find(t=>t.id===r.county)?.name||"",ze=async(s,t=1200,a=.8)=>new Promise((i,o)=>{const l=document.createElement("canvas"),n=l.getContext("2d"),m=new Image;m.onload=()=>{let{width:g,height:N}=m;if(g>t){const b=t/g;g=t,N=N*b}l.width=g,l.height=N,n?.drawImage(m,0,0,g,N),l.toBlob(b=>{if(!b){o(new Error("Canvas to Blob conversion failed"));return}const E=new File([b],s.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`âœ… Compressed: ${s.name} | Original: ${(s.size/1024/1024).toFixed(2)}MB â†’ Compressed: ${(b.size/1024/1024).toFixed(2)}MB`),i(E)},"image/jpeg",a)},m.onerror=()=>o(new Error("Failed to load image")),m.src=URL.createObjectURL(s)}),Ue=async(s,t=.75)=>new Promise((a,i)=>{const o=document.createElement("canvas"),l=o.getContext("2d"),n=new Image;n.onload=()=>{o.width=n.width,o.height=n.height,l?.drawImage(n,0,0),o.toBlob(m=>{if(!m){i(new Error("WebP conversion failed"));return}const g=new File([m],s.name.replace(/\.[^/.]+$/,".webp"),{type:"image/webp",lastModified:Date.now()});console.log(`ðŸ”„ Converted to WebP: ${(g.size/1024/1024).toFixed(2)}MB`),a(g)},"image/webp",t)},n.onerror=()=>i(new Error("Failed to load image for WebP conversion")),n.src=URL.createObjectURL(s)}),Me=async s=>{const t=s.target.files;if(!t)return;const a=Array.from(t).slice(0,10-h.length);u({title:"ðŸ”„ Optimizing images...",description:"Compressing images for faster upload"});for(const i of a)try{if(i.size>10*1024*1024){u({title:"Image too large",description:"Maximum file size is 10MB",variant:"destructive"});continue}if(!i.type.startsWith("image/")){u({title:"Invalid file type",description:"Please upload image files only",variant:"destructive"});continue}let o=i;i.size>1*1024*1024&&(o=await ze(i,1200,.8),o.size>500*1024&&(o=await Ue(o,.75))),V(n=>[...n,o]),Y(n=>[...n,o.size]);const l=new FileReader;l.onload=n=>{n.target?.result&&G(m=>[...m,n.target.result])},l.readAsDataURL(o)}catch(o){console.error("Error optimizing image:",o),u({title:"Image processing failed",description:"Using original image instead",variant:"destructive"}),V(n=>[...n,i]),Y(n=>[...n,i.size]);const l=new FileReader;l.onload=n=>{n.target?.result&&G(m=>[...m,n.target.result])},l.readAsDataURL(i)}u({title:"âœ… Images optimized",description:`Added ${a.length} image(s)`})},Ae=()=>{if(k.length===0)return{original:0,compressed:0,savings:0};const s=h.reduce((i,o,l)=>i+(o.size>k[l]?o.size:k[l]),0),t=k.reduce((i,o)=>i+o,0),a=s-t;return{original:s/1024/1024,compressed:t/1024/1024,savings:a/1024/1024}},De=s=>{V(t=>t.filter((a,i)=>i!==s)),G(t=>t.filter((a,i)=>i!==s)),Y(t=>t.filter((a,i)=>i!==s))},Be=async s=>{const t=[];for(const a of h){const i=a.name.split(".").pop()||"jpg",o=`${s}/${Date.now()}-${Math.random().toString(36).substring(7)}.${i}`;console.log(`ðŸ“¤ Uploading: ${a.name} (${(a.size/1024/1024).toFixed(2)}MB)`);const{error:l}=await j.storage.from("product-images").upload(o,a,{cacheControl:"3600",upsert:!1});if(l)throw console.error("Error uploading image:",l),new Error(`Failed to upload image: ${l.message}`);const{data:{publicUrl:n}}=j.storage.from("product-images").getPublicUrl(o);t.push(n),console.log(`âœ… Uploaded: ${n}`)}return t},Oe=s=>{c(t=>({...t,category:s,subcategory:"",properties:{},brand:"",condition:"New"})),I({}),re(t=>({...t,properties:!0}))},Te=s=>{const t=C();console.log("Selected subcategory:",t),console.log("Subcategory properties:",t?.properties),c(a=>({...a,subcategory:s,properties:{},brand:"",condition:"New"})),I({})},de=(s,t)=>{console.log("Property changed:",s,t),c(a=>({...a,properties:{...a.properties,[s]:t}})),t.toLowerCase().includes("custom")||t.toLowerCase().includes("other")?I(a=>({...a,[s]:""})):I(a=>{const i={...a};return delete i[s],i})},_e=(s,t)=>{I(a=>({...a,[s]:t})),c(a=>({...a,properties:{...a.properties,[s]:t}}))},q=()=>ae.find(s=>s.id===r.category),C=()=>q()?.subcategories?.find(t=>t.id===r.subcategory),me=()=>{const s=C();if(console.log("Getting properties for subcategory:",s),console.log("Subcategory properties raw:",s?.properties),!s?.properties)return{};const t=s.properties;if(t.fields&&typeof t.fields=="object")return t.fields;if(typeof t=="object"&&!Array.isArray(t)){const a=Object.keys(t)[0];if(a&&t[a]&&typeof t[a]=="object")return t}if(typeof t=="string")try{const a=JSON.parse(t);return a.fields||a}catch(a){console.error("Error parsing properties JSON:",a)}return{}},ue=()=>{const s=C();if(!s?.properties)return[];const t=s.properties;return t.required&&Array.isArray(t.required)?t.required:t.fields&&t.fields.required?t.fields.required:[]},A=s=>{re(t=>({...t,[s]:!t[s]}))},Re=()=>{if(!w)return u({title:"Authentication required",description:"Please log in to upload products",variant:"destructive"}),!1;if(h.length===0)return u({title:"Images required",description:"Please upload at least one product image",variant:"destructive"}),!1;if(!r.name||!r.price||!r.category||!r.subcategory||!r.county||!r.location)return u({title:"Missing required fields",description:"Please fill in all required fields",variant:"destructive"}),!1;const t=ue().filter(a=>!r.properties[a]||r.properties[a].trim()==="");if(t.length>0){const a=t.map(i=>me()[i]?.label||i);return u({title:"Missing specifications",description:`Please fill in: ${a.join(", ")}`,variant:"destructive"}),!1}return!0},We=async s=>{if(s.preventDefault(),!!Re()){se(!0);try{const{data:t}=await j.from("profiles").select("plan_type").eq("id",w.id).single(),{count:a}=await j.from("products").select("*",{count:"exact",head:!0}).eq("user_id",w.id),i=t?.plan_type?.toLowerCase()||"free",o=i==="free"||i==="starter"?5:i==="silver"||i==="professional"?50:1/0;if(a&&a>=o){u({title:"Product limit reached",description:`Upgrade your plan to add more products (${a}/${o} used)`,variant:"destructive"}),M("/pricing");return}const l=q(),n=C();console.log("Creating product with:",{categoryId:r.category,subcategoryId:r.subcategory,categoryName:l?.name,subcategoryName:n?.name});const m={user_id:w.id,owner_id:w.id,name:r.name,description:r.description,price:parseFloat(r.price),category_id:r.category,category:l?.name,subcategory_id:r.subcategory,subcategory:n?.name,brand:r.brand||null,condition:r.condition,county:r.county,location:r.location,phone:r.phone,whatsapp:r.whatsapp||null,email:r.email,original_price:r.originalPrice?parseFloat(r.originalPrice):null,featured:r.featured,is_negotiable:r.negotiable,properties:{...r.properties,...H},status:"pending",images:[]};console.log("Final product data:",m);const{data:g,error:N}=await j.from("products").insert([m]).select().single();if(N)throw console.error("Product creation error details:",N),new Error(`Failed to create product: ${N.message}`);if(console.log("Product created successfully:",g),h.length>0&&g)try{const b=await Be(g.id);console.log("Images uploaded:",b);const{error:E}=await j.from("products").update({images:b}).eq("id",g.id);if(E)throw console.error("Error updating product images:",E),new Error(`Failed to update product with images: ${E.message}`)}catch(b){console.error("Image upload error:",b),u({title:"Images upload failed",description:"Product created but images failed to upload",variant:"destructive"})}u({title:"ðŸŽ‰ Product submitted for review!",description:"Your listing is pending admin approval and will be visible soon."}),M("/dashboard")}catch(t){console.error("Error in handleSubmit:",t);let a="There was an error uploading your product. Please try again.";t.message&&(a=t.message),u({title:"Upload failed",description:a,variant:"destructive"})}finally{se(!1)}}},f=me(),Q=ue(),ge=f&&"brand"in f,pe=Ae();console.log("Current properties:",f),console.log("Required fields:",Q),console.log("Has brand property:",ge);const Ve=f?.condition?.options||["New","Used - Like New","Used - Good","Used - Fair","Refurbished","For Parts"];return ve?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(K,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading categories..."})]})}):w?e.jsx("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("header",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Sell Your Item"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Reach thousands of buyers. Fill in the details below to create your professional listing."})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"flex items-center space-x-4",children:["Basic","Category","Details","Contact"].map((s,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${t===0?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:t+1}),e.jsx("span",{className:"ml-2 text-sm font-medium",children:s}),t<3&&e.jsx("div",{className:"w-12 h-1 bg-gray-300 mx-2"})]},s))})}),e.jsxs("form",{onSubmit:We,children:[e.jsxs(D,{className:"mb-6 shadow-lg border-0",children:[e.jsx(B,{className:"cursor-pointer bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-t-lg",onClick:()=>A("basic"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"flex items-center gap-3 text-white",children:[e.jsx(Ne,{className:"h-6 w-6"}),"Product Images & Details"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:"secondary",className:"bg-blue-400",children:[h.length,"/10 photos"]}),y.basic?e.jsx(R,{}):e.jsx(T,{})]})]})}),y.basic&&e.jsxs(_,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-lg font-semibold",children:"Product Photos *"}),h.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ye,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["Saved ",pe.savings.toFixed(2),"MB"]})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Add clear photos from different angles. Images are automatically optimized for faster upload.",h.length>0&&e.jsxs("span",{className:"block mt-1 text-green-600",children:["âœ… Images optimized: ",pe.compressed.toFixed(2),"MB total"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[we.map((s,t)=>e.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border-2 border-blue-200 shadow-md group",children:[e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center",children:e.jsx(U,{type:"button",size:"icon",variant:"destructive",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>De(t),children:e.jsx(ss,{className:"h-4 w-4"})})}),t===0&&e.jsx(z,{className:"absolute top-2 left-2 bg-blue-600",children:"Main"}),e.jsxs(z,{variant:"secondary",className:"absolute bottom-2 right-2 text-xs bg-black bg-opacity-70 text-white",children:[(k[t]/1024/1024).toFixed(1),"MB"]})]},t)),h.length<10&&e.jsxs("label",{className:"aspect-square rounded-xl border-2 border-dashed border-blue-300 hover:border-blue-500 cursor-pointer flex flex-col items-center justify-center transition-all hover:bg-blue-50 group",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Me,className:"hidden"}),e.jsx(Ne,{className:"h-8 w-8 text-blue-500 mb-2 group-hover:scale-110 transition-transform"}),e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Add Photos"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:["Max 10MB each",e.jsx("br",{}),e.jsx("span",{className:"text-green-600",children:"Auto-optimized"})]})]})]}),e.jsxs("div",{className:"p-4 bg-white border border-gray-100 rounded-xl shadow-sm space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Listing Strength"})]}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full text-white ${ne($)} shadow-sm`,children:[$,"% - ",Ie($)]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 ease-out ${ne($)} shadow-[0_0_10px_rgba(34,197,94,0.3)]`,style:{width:`${$}%`}})}),e.jsx("p",{className:"text-[10px] text-gray-500 italic",children:"High-strength listings reach 3x more buyers. Add more photos and details to improve!"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"name",className:"text-base font-semibold",children:"Product Title *"}),e.jsx(x,{id:"name",placeholder:"e.g. iPhone 13 Pro Max 256GB - Like New Condition",value:r.name,onChange:s=>c(t=>({...t,name:s.target.value})),className:"h-12 text-base",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"price",className:"text-base font-semibold",children:"Price (KES) *"}),e.jsx(x,{id:"price",type:"number",placeholder:"15000",value:r.price,onChange:s=>c(t=>({...t,price:s.target.value})),className:"h-12 text-base",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"originalPrice",className:"text-base font-semibold",children:"Original Price (Optional)"}),e.jsx(x,{id:"originalPrice",type:"number",placeholder:"20000",value:r.originalPrice,onChange:s=>c(t=>({...t,originalPrice:s.target.value})),className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Location *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"county",className:"text-sm font-medium",children:"County"}),e.jsxs(S,{value:r.county,onValueChange:s=>{c(t=>({...t,county:s,location:""})),Z(!1),X(""),oe("")},children:[e.jsx(P,{className:"h-12 text-base",children:e.jsx(L,{placeholder:"Search or select county"})}),e.jsxs(F,{children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search counties...",value:J,onChange:s=>Pe(s.target.value),className:"h-9 pl-8",onClick:s=>s.stopPropagation()})]})}),le.map(s=>e.jsx(v,{value:s.id,className:"text-base",children:s.name},s.id)),le.length===0&&e.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No counties found"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"location",className:"text-sm font-medium",children:"Specific Area/Neighborhood"}),Le?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{placeholder:"Enter your specific location...",value:Fe,onChange:s=>{X(s.target.value),c(t=>({...t,location:s.target.value}))},className:"h-12 text-base"}),e.jsx(U,{type:"button",variant:"outline",onClick:()=>{Z(!1),X(""),c(s=>({...s,location:""}))},className:"h-12",children:e.jsx(Je,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your exact area, estate, or landmark"})]}):e.jsx("div",{className:"space-y-2",children:e.jsxs(S,{value:r.location,onValueChange:s=>{s==="custom"?Z(!0):c(t=>({...t,location:s}))},disabled:!r.county,children:[e.jsx(P,{className:"h-12 text-base",children:e.jsx(L,{placeholder:r.county?"Search or select location":"Select county first"})}),e.jsxs(F,{children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search locations...",value:ie,onChange:s=>oe(s.target.value),className:"h-9 pl-8",onClick:s=>s.stopPropagation()})]})}),ce.map(s=>e.jsx(v,{value:s,className:"text-base",children:s},s)),e.jsx(v,{value:"custom",className:"text-base text-blue-600 font-medium border-t",children:"+ Add Custom Location"}),ce.length===0&&r.county&&e.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No locations found"})]})]})})]})]}),r.county&&r.location&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsxs("span",{children:[e.jsx("strong",{children:r.location}),","," ",Ee()]})]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{htmlFor:"description",className:"text-base font-semibold flex items-center justify-between",children:[e.jsx("span",{children:"Description *"}),e.jsxs(U,{type:"button",variant:"ghost",size:"sm",onClick:ke,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 font-bold gap-1 animate-pulse",children:[e.jsx(he,{className:"h-3 w-3"}),"AI Enhance"]})]}),e.jsx(es,{id:"description",placeholder:"Describe your product in detail... Include features, specifications, reason for selling, and any important details that buyers should know.",rows:6,value:r.description,onChange:s=>c(t=>({...t,description:s.target.value})),className:"text-base resize-none border-2 focus:border-blue-500 rounded-xl",required:!0}),e.jsxs("p",{className:"text-sm text-muted-foreground flex justify-between",children:[e.jsxs("span",{children:[r.description.length,"/2000 characters"]}),r.description.length<50&&e.jsxs("span",{className:"text-amber-500 text-xs flex items-center gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Add more details for a better score"]})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{checked:r.negotiable,onCheckedChange:s=>c(t=>({...t,negotiable:s}))}),e.jsx(d,{className:"text-sm font-medium",children:"Price Negotiable"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{checked:r.featured,onCheckedChange:s=>c(t=>({...t,featured:s}))}),e.jsx(d,{className:"text-sm font-medium",children:"Feature Listing (+KES 500)"})]})]})]})]}),e.jsxs(D,{className:"mb-6 shadow-lg border-0",children:[e.jsx(B,{className:"cursor-pointer bg-gradient-to-r from-green-500 to-green-600 text-white rounded-t-lg",onClick:()=>A("category"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"flex items-center gap-3 text-white",children:[e.jsx(Xe,{className:"h-6 w-6"}),"Category & Type"]}),y.category?e.jsx(R,{}):e.jsx(T,{})]})}),y.category&&e.jsxs(_,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"category",className:"text-base font-semibold",children:"Main Category *"}),e.jsxs(S,{value:r.category,onValueChange:Oe,children:[e.jsx(P,{className:"h-12 text-base",children:e.jsx(L,{placeholder:"Select a category"})}),e.jsx(F,{children:ae.map(s=>e.jsx(v,{value:s.id,className:"text-base",children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"subcategory",className:"text-base font-semibold",children:"Subcategory *"}),e.jsxs(S,{value:r.subcategory,onValueChange:Te,disabled:!r.category,children:[e.jsx(P,{className:"h-12 text-base",children:e.jsx(L,{placeholder:"Select subcategory"})}),e.jsx(F,{children:q()?.subcategories?.map(s=>e.jsx(v,{value:s.id,className:"text-base",children:s.name},s.id))})]})]}),!ge&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"brand",className:"text-base font-semibold",children:"Brand (Optional)"}),e.jsx(x,{id:"brand",placeholder:"e.g. Apple, Samsung, Toyota",value:r.brand,onChange:s=>c(t=>({...t,brand:s.target.value})),className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{htmlFor:"condition",className:"text-base font-semibold",children:"Condition"}),e.jsxs(S,{value:r.condition,onValueChange:s=>c(t=>({...t,condition:s})),children:[e.jsx(P,{className:"h-12 text-base",children:e.jsx(L,{})}),e.jsx(F,{children:Ve.map(s=>e.jsx(v,{value:s,className:"text-base",children:s},s))})]})]})]}),r.category&&r.subcategory&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Selected: ",q()?.name," â†’"," ",C()?.name]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Please fill in the specific properties for your"," ",C()?.name?.toLowerCase()," in the next section."]}),Object.keys(f).length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-xs text-green-600",children:["Required fields:"," ",Q.map(s=>f[s]?.label||s).join(", ")]})})]})]})]}),Object.keys(f).length>0&&e.jsxs(D,{className:"mb-6 shadow-lg border-0",children:[e.jsx(B,{className:"cursor-pointer bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-t-lg",onClick:()=>A("properties"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"flex items-center gap-3 text-white",children:[e.jsx(be,{className:"h-6 w-6"}),"Specifications & Properties",e.jsxs(z,{variant:"secondary",className:"ml-2 bg-purple-400",children:[Object.keys(f).length," fields"]})]}),y.properties?e.jsx(R,{}):e.jsx(T,{})]})}),y.properties&&e.jsxs(_,{className:"p-6",children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:Object.entries(f).map(([s,t])=>{const a=t,i=Q.includes(s);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{htmlFor:`property-${s}`,className:"text-base font-semibold",children:[a.label," ",i&&e.jsx("span",{className:"text-red-500",children:"*"})]}),a.type==="select"?e.jsxs(S,{value:r.properties[s]||"",onValueChange:o=>de(s,o),required:i,children:[e.jsx(P,{className:"h-12 text-base",children:e.jsx(L,{placeholder:`Select ${a.label.toLowerCase()}`})}),e.jsx(F,{children:a.options?.map(o=>e.jsx(v,{value:o,className:"text-base",children:o},o))})]}):e.jsx(x,{id:`property-${s}`,type:a.type,placeholder:a.placeholder,value:r.properties[s]||"",onChange:o=>de(s,o.target.value),className:"h-12 text-base",required:i}),H[s]!==void 0&&e.jsx("div",{className:"mt-2",children:e.jsx(x,{placeholder:`Specify ${a.label.toLowerCase()}`,value:H[s],onChange:o=>_e(s,o.target.value),className:"h-12 text-base",required:i})})]},s)})}),Object.keys(r.properties).length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Selected Specifications:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.properties).map(([s,t])=>e.jsxs(z,{variant:"secondary",className:"px-3 py-1 bg-purple-100 text-purple-800 border-purple-300",children:[e.jsxs("strong",{children:[f[s]?.label||s,":"]})," ",t]},s))})]})]})]}),e.jsxs(D,{className:"mb-6 shadow-lg border-0",children:[e.jsx(B,{className:"cursor-pointer bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-t-lg",onClick:()=>A("contact"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"flex items-center gap-3 text-white",children:[e.jsx(je,{className:"h-6 w-6"}),"Contact Information"]}),y.contact?e.jsx(R,{}):e.jsx(T,{})]})}),y.contact&&e.jsxs(_,{className:"p-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{htmlFor:"phone",className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Phone *"]}),e.jsx(x,{id:"phone",type:"tel",placeholder:"+254712345678",value:r.phone,onChange:s=>c(t=>({...t,phone:s.target.value})),className:"h-12 text-base",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{htmlFor:"whatsapp",className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"WhatsApp"]}),e.jsx(x,{id:"whatsapp",type:"tel",placeholder:"+254712345678",value:r.whatsapp,onChange:s=>c(t=>({...t,whatsapp:s.target.value})),className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{htmlFor:"email",className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Email *"]}),e.jsx(x,{id:"email",type:"email",placeholder:"you@example.com",value:r.email,onChange:s=>c(t=>({...t,email:s.target.value})),className:"h-12 text-base",required:!0})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Privacy & Safety"]}),e.jsx("p",{className:"text-sm text-orange-700",children:"Your contact information will be visible to potential buyers. We recommend meeting in public places for transactions."})]})]})]}),e.jsxs("div",{className:"flex gap-4 sticky bottom-4 bg-white p-4 rounded-xl shadow-2xl border",children:[e.jsx(U,{type:"button",variant:"outline",onClick:()=>M("/dashboard"),className:"flex-1 h-14 text-base font-semibold",disabled:W,children:"Cancel"}),e.jsx(U,{type:"submit",disabled:W,className:"flex-1 h-14 text-base font-semibold bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",size:"lg",children:W?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-5 w-5 animate-spin mr-3"}),"Publishing Your Listing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"h-5 w-5 mr-2"}),"Publish Product"]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(K,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading..."})]})})}export{xs as default};
