import{r as l,u as ce,j as e,o as L,I as O,D as X,B as u,q as de,s as j,bo as me,al as x,a7 as z,aU as xe,L as he,b as F,e as q,ac as pe,x as K,y as Y,a8 as ue,av as J,d as fe}from"./index-DIxCcwTo.js";import{S as Q}from"./SEO-DRdgyEjE.js";import{D as Z,a as ee,d as se,c as te,e as ae}from"./dialog-YYEI7PMn.js";import{C as re}from"./circle-check-BFErec5s.js";import{A as ge}from"./arrow-right-CWu2P4sX.js";import{A as G}from"./arrow-down-left-DGEwyqp5.js";import{P as be}from"./plus-CBbazF2H.js";import{E as je}from"./eye-off-BjvTbt_r.js";import{E as ye}from"./eye-DkAcDlvf.js";import{C as we}from"./copy-YHHq3K_B.js";import{C as Ne}from"./credit-card-CW0P80aF.js";import{H as ve}from"./history-DAXOqsNw.js";import{A as Ce}from"./arrow-up-right-7gsiyfAW.js";import{f as Se}from"./format-CcXPetpd.js";const ke=({open:f,onOpenChange:n,walletBalance:g,currency:d,userId:T,onSuccess:_})=>{const[W,h]=l.useState(""),[m,b]=l.useState(""),[R,D]=l.useState(!1),[r,y]=l.useState("input"),{toast:M}=ce(),w=10,o=parseFloat(W)||0,A=t=>{const c=t.replace(/\D/g,"");c.startsWith("254")?b(c):c.startsWith("0")?b("254"+c.substring(1)):c.startsWith("7")||c.startsWith("1")?b("254"+c):b(c)},N=t=>t.length===12&&t.startsWith("254")?`+${t.substring(0,3)} ${t.substring(3,6)} ${t.substring(6,9)} ${t.substring(9)}`:t,C=m.startsWith("254")&&m.length===12,S=o>=w&&o<=g,v=async()=>{if(!(!S||!C)){if(r==="input"){y("confirm");return}D(!0),y("processing");try{const{data:{session:t}}=await j.auth.getSession();if(console.log("[Withdrawal] Session:",t?"Found":"Not found"),console.log("[Withdrawal] User ID from session:",t?.user?.id),console.log("[Withdrawal] User ID from props:",T),!t)throw new Error("You must be logged in to withdraw");const c="https://sellhubshop-backend.onrender.com";console.log("[Withdrawal] Calling:",`${c}/api/b2c`);const P=await fetch(`${c}/api/b2c`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({amount:o,phone:m,userId:T})}),$=await P.json();if(console.log("[Withdrawal] Response status:",P.status),console.log("[Withdrawal] Response data:",$),P.ok&&$.success)M({title:"Withdrawal Initiated!",description:`KSh ${o.toLocaleString()} will be sent to ${N(m)}`,duration:5e3}),_(),k();else throw new Error($.error||"Withdrawal failed")}catch(t){console.error("Withdrawal error:",t),M({title:"Withdrawal Failed",description:t.message||"Please try again later",variant:"destructive"}),y("input")}finally{D(!1)}}},k=()=>{h(""),b(""),y("input"),D(!1),n(!1)};return e.jsx(Z,{open:f,onOpenChange:k,children:e.jsxs(ee,{className:"sm:max-w-md",children:[e.jsxs(se,{children:[e.jsxs(te,{className:"text-2xl font-black",children:[r==="input"&&"Withdraw Funds",r==="confirm"&&"Confirm Withdrawal",r==="processing"&&"Processing..."]}),e.jsxs(ae,{children:[r==="input"&&"Enter amount and M-Pesa number",r==="confirm"&&"Please review your withdrawal details",r==="processing"&&"Sending withdrawal request to M-Pesa"]})]}),r==="input"&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"amount",className:"text-sm font-bold",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:d}),e.jsx(O,{id:"amount",type:"number",placeholder:"0",value:W,onChange:t=>h(t.target.value),className:"pl-16 text-lg font-bold h-14",min:w,max:g})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["Min: ",d," ",w]}),e.jsxs("span",{className:"text-gray-500",children:["Available: ",d," ",g.toLocaleString()]})]}),o>0&&!S&&e.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3"}),o<w?`Minimum withdrawal is ${d} ${w}`:"Insufficient balance"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"phone",className:"text-sm font-bold",children:"M-Pesa Phone Number"}),e.jsx(O,{id:"phone",type:"tel",placeholder:"254712345678",value:m,onChange:t=>A(t.target.value),className:"text-lg font-mono h-14"}),e.jsx("p",{className:"text-xs text-gray-500",children:m&&C?e.jsxs("span",{className:"text-emerald-600 flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),N(m)]}):"Enter number in format: 254712345678"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-xs font-bold text-gray-500",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[100,500,1e3,2e3].map(t=>e.jsx(u,{type:"button",variant:"outline",size:"sm",onClick:()=>h(String(Math.min(t,g))),disabled:g<t,className:"font-bold",children:t},t))})]})]}),r==="confirm"&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-500",children:"Amount"}),e.jsxs("span",{className:"text-2xl font-black",children:[d," ",o.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-500",children:"To"}),e.jsx("span",{className:"text-lg font-bold font-mono",children:N(m)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx("span",{className:"text-sm font-bold text-gray-500",children:"New Balance"}),e.jsxs("span",{className:"text-lg font-bold",children:[d," ",(g-o).toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm text-blue-900",children:[e.jsx("p",{className:"font-bold mb-1",children:"ðŸ“± M-Pesa Prompt"}),e.jsxs("p",{className:"text-xs",children:["You'll receive an M-Pesa confirmation on your phone. The money will be sent to"," ",N(m)," once processed."]})]})]}),r==="processing"&&e.jsxs("div",{className:"py-12 flex flex-col items-center justify-center space-y-4",children:[e.jsx(de,{className:"w-12 h-12 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Contacting M-Pesa..."})]}),e.jsxs("div",{className:"flex gap-3",children:[r==="confirm"&&e.jsx(u,{type:"button",variant:"outline",onClick:()=>y("input"),className:"flex-1",disabled:R,children:"Back"}),r!=="processing"&&e.jsxs(u,{onClick:v,disabled:!S||!C||R,className:"flex-1 h-12 font-bold",children:[r==="input"&&e.jsxs(e.Fragment,{children:["Continue",e.jsx(ge,{className:"w-4 h-4 ml-2"})]}),r==="confirm"&&"Confirm Withdrawal"]})]})]})})},He=()=>{const{user:f}=me(),[n,g]=l.useState(null),[d,T]=l.useState([]),[_,W]=l.useState(!0),[h,m]=l.useState(!1),[b,R]=l.useState("from-gray-900 via-gray-800 to-black"),[D,r]=l.useState(!1),[y,M]=l.useState(!1),[w,o]=l.useState(!1),[A,N]=l.useState(""),[C,S]=l.useState(!1),[v,k]=l.useState(null),t=async s=>{if(s.preventDefault(),!n||!f)return;const a=Number(A);if(!a||a<10){x.error("Minimum deposit amount is KES 10");return}S(!0);try{const{data:i,error:p}=await j.from("wallet_transactions").insert({wallet_id:n.id,amount:a,type:"credit",reference_type:"deposit",description:"M-Pesa Deposit",status:"pending"}).select().single();if(p)throw p;const H=i.id.replace(/-/g,"").substring(0,12).toUpperCase(),{error:U}=await j.from("wallet_transactions").update({reference_id:H}).eq("id",i.id);U&&console.error("Failed to save short ref",U);const{data:oe}=await j.from("profiles").select("phone").eq("id",f.id).single(),V=oe?.phone;if(!V){x.error("Please set a phone number in your Profile Settings first.");return}const I=await(await fetch("https://sellhubshop-backend.onrender.com/api/v1/stk-push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.ceil(a),phone:V,accountRef:H,description:"Wallet Deposit",walletTransactionId:i.id})})).json();if(I.ResponseCode==="0"){console.log("[Wallet] Storing CheckoutRequestID:",I.CheckoutRequestID);const{error:B}=await j.from("wallet_transactions").update({mpesa_receipt:I.CheckoutRequestID}).eq("id",i.id);B?console.error("[Wallet] Failed to store CheckoutRequestID:",B):console.log("[Wallet] CheckoutRequestID stored successfully"),x.success("STK Push initiated! Check your phone."),o(!1),N(""),k(i.id),x.loading("Waiting for M-Pesa confirmation...")}else x.error("M-Pesa Request Failed: "+(I.errorMessage||I.CustomerMessage||"Unknown"))}catch(i){x.error("Failed to initiate deposit: "+i.message)}finally{S(!1)}},c=()=>{if(!n)return"â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢";const s=n.id.split("").reduce((i,p)=>i+p.charCodeAt(0),0),a=String(s).slice(-4).padStart(4,"0");return h?`5234 8765 ${a.slice(0,2)}${a.slice(2,4)} ${a}`:`â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ ${a}`},P=()=>h?"12/28":"â€¢â€¢/â€¢â€¢",$=()=>h?"***":"â€¢â€¢â€¢",le=()=>{if(n){const s=n.id.split("").reduce((i,p)=>i+p.charCodeAt(0),0),a=String(s).slice(-4).padStart(4,"0");navigator.clipboard.writeText(`5234876${a.slice(0,2)}${a.slice(2,4)}${a}`),r(!0),setTimeout(()=>r(!1),2e3)}},ne=[{name:"Midnight",gradient:"from-gray-900 via-gray-800 to-black"},{name:"Ocean",gradient:"from-blue-600 via-blue-700 to-blue-900"},{name:"Sunset",gradient:"from-orange-500 via-pink-600 to-purple-700"},{name:"Forest",gradient:"from-emerald-600 via-green-700 to-teal-800"},{name:"Royal",gradient:"from-purple-600 via-indigo-700 to-blue-800"},{name:"Rose",gradient:"from-pink-500 via-rose-600 to-red-700"}],E=async()=>{if(f){W(!0);try{const{data:s,error:a}=await j.from("wallets").select("*").eq("user_id",f.id).single();if(a&&a.code!=="PGRST116")throw a;if(s){g(s);const{data:i,error:p}=await j.from("wallet_transactions").select("*").eq("wallet_id",s.id).order("created_at",{ascending:!1});if(p)throw p;T(i||[])}}catch(s){console.error("Error fetching wallet data:",s)}finally{W(!1)}}};l.useEffect(()=>{E()},[f]),l.useEffect(()=>{let s;return v&&(console.log("Starting polling for transaction:",v),s=setInterval(async()=>{const{data:a,error:i}=await j.from("wallet_transactions").select("status, id, amount").eq("id",v).single();console.log("Polling result:",{id:v,status:a?.status,error:i}),a&&a.status==="completed"?(console.log("Transaction completed detected!"),clearInterval(s),k(null),x.dismiss(),x.success("Payment Received! Balance updated."),E()):a&&(a.status==="failed"||a.status==="cancelled")&&(console.log("Transaction failed detected!"),clearInterval(s),k(null),x.dismiss(),x.error("Payment failed or was cancelled."),E())},3e3)),()=>clearInterval(s)},[v]);const ie=()=>{E()};return _?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(z,{className:"w-8 h-8 animate-spin text-primary"})}):n?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(Q,{title:"My Wallet - SellHub",description:"View your balance and transaction history."}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your earnings and payments"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[e.jsxs(u,{variant:"outline",onClick:E,className:"flex-1 md:flex-none h-12 rounded-xl border-gray-100 hover:border-primary/30 transition-all font-bold text-gray-600 bg-white shadow-sm",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(u,{onClick:()=>o(!0),className:"flex-1 md:flex-none h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white font-bold shadow-lg shadow-green-600/20 transition-all active:scale-95",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Deposit Funds"]}),e.jsxs(u,{onClick:()=>M(!0),className:"flex-1 md:flex-none h-12 rounded-xl bg-primary hover:bg-primary/90 text-white font-bold shadow-lg shadow-primary/20 transition-all active:scale-95",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(F,{className:`bg-gradient-to-br ${b} text-white border-none overflow-hidden relative shadow-2xl shadow-gray-400/30 rounded-[24px] aspect-[1.586/1] transition-all duration-500 hover:scale-[1.02]`,children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white rounded-full blur-[80px]"})]}),e.jsx("div",{className:"absolute top-6 left-6",children:e.jsx("div",{className:"w-12 h-10 bg-gradient-to-br from-yellow-200 to-yellow-400 rounded-lg opacity-80",children:e.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-[2px] p-1",children:[e.jsx("div",{className:"bg-yellow-300 rounded-sm"}),e.jsx("div",{className:"bg-yellow-300 rounded-sm"}),e.jsx("div",{className:"bg-yellow-300 rounded-sm"}),e.jsx("div",{className:"bg-yellow-300 rounded-sm"})]})})}),e.jsx("div",{className:"absolute top-6 right-6 opacity-60",children:e.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"}),e.jsx("path",{d:"M8 12h8M12 8v8"})]})}),e.jsxs(q,{className:"relative h-full flex flex-col justify-between p-6",children:[e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60",children:"Card Number"}),e.jsx("button",{onClick:()=>m(!h),className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors",children:h?e.jsx(je,{className:"w-4 h-4"}):e.jsx(ye,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xl font-bold tracking-wider font-mono",children:c()}),e.jsx("button",{onClick:le,className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors",children:D?e.jsx(pe,{className:"w-4 h-4 text-emerald-400"}):e.jsx(we,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60 mb-1",children:"Balance"}),e.jsxs("p",{className:"text-2xl font-black tracking-tight",children:[n.currency," ",n.balance.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-widest opacity-50 mb-0.5",children:"Expiry"}),e.jsx("p",{className:"text-sm font-bold font-mono",children:P()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-widest opacity-50 mb-0.5",children:"CVV"}),e.jsx("p",{className:"text-sm font-bold font-mono",children:$()})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(Ne,{className:"w-10 h-10 opacity-80"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-wider mt-1 opacity-60",children:"SellHub"})]})]})]})]}),e.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:ne.map(s=>e.jsx("button",{onClick:()=>R(s.gradient),className:`w-10 h-10 rounded-xl bg-gradient-to-br ${s.gradient} border-2 transition-all ${b===s.gradient?"border-primary scale-110 shadow-lg":"border-gray-200 hover:scale-105"}`,title:s.name},s.name))})]}),e.jsxs(F,{className:"border-none shadow-xl shadow-gray-200/50 rounded-[32px] overflow-hidden",children:[e.jsx(K,{className:"border-b border-gray-50 pb-4",children:e.jsx(Y,{className:"text-lg font-black text-gray-900",children:"Quick Stats"})}),e.jsxs(q,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:"Total Earned"}),e.jsxs("span",{className:"text-lg font-black text-emerald-600",children:[n.currency," ",d.filter(s=>s.type==="credit"&&s.status==="completed").reduce((s,a)=>s+a.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:"Total Withdrawn"}),e.jsxs("span",{className:"text-lg font-black text-blue-600",children:[n.currency," ",d.filter(s=>s.type==="debit"&&s.reference_type==="withdrawal").reduce((s,a)=>s+a.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:"Net Sales"}),e.jsx("div",{className:"bg-gray-50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-sm font-black text-gray-900",children:[d.filter(s=>s.reference_type==="order").length," items"]})})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(F,{className:"border-none shadow-xl shadow-gray-200/50 rounded-[40px] overflow-hidden min-h-[400px]",children:[e.jsxs(K,{className:"flex flex-row items-center justify-between border-b border-gray-50 pb-6",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-2xl font-black text-gray-900",children:"Recent Activity"}),e.jsx(ue,{className:"text-sm font-medium text-gray-400",children:"Your latest credits and debits"})]}),e.jsx("div",{className:"bg-gray-50 p-2.5 rounded-2xl",children:e.jsx(ve,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx(q,{className:"p-0",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(J,{className:"w-12 h-12 text-muted-foreground mb-4 opacity-20"}),e.jsx("p",{className:"text-muted-foreground",children:"No recent transactions to show."})]}):e.jsx("div",{className:"divide-y divide-muted",children:d.map(s=>e.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-gray-50/50 transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 ${s.type==="credit"?"bg-emerald-50 border-2 border-emerald-100":"bg-blue-50 border-2 border-blue-100"}`,children:s.type==="credit"?e.jsx(G,{className:"w-6 h-6 text-emerald-600"}):e.jsx(Ce,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-black text-gray-900 truncate",children:s.description||"Deposit"}),e.jsxs(fe,{variant:"outline",className:`text-[10px] font-bold px-2 py-0.5 ${s.status==="completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":s.status==="failed"?"bg-red-50 text-red-700 border-red-200":"bg-amber-50 text-amber-700 border-amber-200"}`,children:[s.status==="completed"&&e.jsx(re,{className:"w-3 h-3 mr-1"}),s.status==="failed"&&e.jsx(X,{className:"w-3 h-3 mr-1"}),s.status==="pending"&&e.jsx(J,{className:"w-3 h-3 mr-1"}),s.status.toUpperCase()]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsx("span",{className:"text-gray-400 font-bold",children:Se(new Date(s.created_at),"MMM dd, yyyy â€¢ h:mm a")}),e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsx("span",{className:"text-gray-500 font-bold capitalize",children:s.reference_type})]})]})]}),e.jsx("div",{className:"flex items-center gap-3 flex-shrink-0",children:e.jsx("div",{className:`flex items-center gap-2 px-4 py-2 rounded-2xl font-black text-lg ${s.type==="credit"?"bg-emerald-50 text-emerald-600":"bg-blue-50 text-blue-600"}`,children:e.jsxs("span",{children:[s.type==="credit"?"+":"-"," ",n.currency," ",s.amount.toLocaleString()]})})})]},s.id))})})]})})]}),e.jsx(ke,{open:y,onOpenChange:M,walletBalance:n?.balance||0,currency:n?.currency||"KSh",userId:f?.id||"",onSuccess:ie}),e.jsx(Z,{open:w,onOpenChange:o,children:e.jsxs(ee,{children:[e.jsxs(se,{children:[e.jsx(te,{children:"Deposit Funds"}),e.jsx(ae,{children:"Add money to your wallet via M-Pesa."})]}),e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{htmlFor:"amount",children:"Amount (KES)"}),e.jsx(O,{id:"amount",type:"number",placeholder:"e.g. 500",value:A,onChange:s=>N(s.target.value),min:"10",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{type:"button",variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:C,children:C?"Processing...":"Deposit Now"})]})]})]})})]}):e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx(Q,{title:"My Wallet - SellHub",description:"View your balance and transactions."}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(xe,{className:"w-24 h-24 mx-auto text-muted-foreground mb-6"}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"No Wallet Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"It seems you don't have a wallet associated with your account yet. Make a sale to automatically create one!"}),e.jsx(u,{asChild:!0,size:"lg",className:"w-full",children:e.jsx(he,{to:"/product-upload",children:"Start Selling"})})]})]})};export{He as default};
